#!/usr/bin/env node
var db = require('../lib/database');

module.exports = (data) => new Promise((res, rej)=>{
  Promise.all([
    db.fn('check', data.conn, 'stats', data.coin).then((exists) =>{
      if (exists == false) {
        console.log('no stats entry found, creating now..');
        db.fn('create', data.conn, 'stats', data.coin).then(()=>{});
      } else {}
    }),
    db.fn('check', data.conn, 'richlist', data.coin).then((exists)=>{
      if (exists == false) {
        console.log('no richlist entry found, creating now..');
        db.fn('create', data.conn, 'richlist', data.coin).then(() =>{});
      }
    }).then(()=>{res('done')})
  ])
  // db.fn('check', data.conn, 'stats', data.coin).then((exists) =>{
  //   if (exists == false) {
  //     console.log('no stats entry found, creating now..');
  //     db.fn('create', data.conn, 'stats', data.coin).then(()=>{});
  //   } else {}
  // });
  // db.fn('check', data.conn, 'richlist', data.coin).then((exists)=>{
  //   if (exists == false) {
  //     console.log('no richlist entry found, creating now..');
  //     db.fn('create', data.conn, 'richlist', data.coin).then(() =>{});
  //   }
  // });
})

